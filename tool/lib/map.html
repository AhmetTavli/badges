<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text Measurement</title>
</head>
<body>
    <script type="text/javascript">
        (function () {
            var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            var g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            var textEle = document.createElementNS('http://www.w3.org/2000/svg', 'text');

            svg.setAttribute('width', 0);
            svg.setAttribute('height', 0);
            g.setAttribute('fill', '#000');

            g.appendChild(textEle);
            svg.appendChild(g);
            document.getElementsByTagName('body')[0].appendChild(svg);

            function measureText(fontSize, fontFamily, text) {
                g.setAttribute('font-size', fontSize);
                g.setAttribute('font-family', fontFamily);

                if (text === void 0) {
                    var arr = [];
                	for (var i = 0; i < 127; i++) {
                		try {
                			var ch = String.fromCharCode(i);
                			textEle.innerHTML = ch;
                			arr[i] = textEle.clientWidth;
                		} catch (e) {}
                	}

                	console.log(arr);
                } else {
                    textEle.innerHTML = text;
                    console.log(textEle.clientWidth);
                }
            }

            measureText(12, 'DejaVu Sans,Verdana,Geneva,sans-serif', 'A');
            measureText(12, 'DejaVu Sans,Verdana,Geneva,sans-serif', 'B');
            measureText(12, 'DejaVu Sans,Verdana,Geneva,sans-serif', 'A B');
        })();

    </script>
</body>
</html>
